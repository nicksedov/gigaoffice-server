# ============================================================================
# Kafka Service Configuration Example
# ============================================================================
# This file demonstrates all available Kafka configuration options
# Copy relevant sections to your .env file and adjust values as needed

# ----------------------------------------------------------------------------
# Core Kafka Settings
# ----------------------------------------------------------------------------

# Kafka broker connection (comma-separated list for clusters)
KAFKA_BOOTSTRAP_SERVERS=localhost:9092
# KAFKA_BOOTSTRAP_SERVERS=kafka-1:9092,kafka-2:9092,kafka-3:9092

# Topic names
KAFKA_TOPIC_REQUESTS=gigaoffice-requests
KAFKA_TOPIC_RESPONSES=gigaoffice-responses
KAFKA_TOPIC_DLQ=gigaoffice-dlq

# Consumer group ID
KAFKA_CONSUMER_GROUP=gigaoffice-consumers

# ----------------------------------------------------------------------------
# Topic Auto-Creation Settings
# ----------------------------------------------------------------------------

# Enable/disable automatic topic creation (true/false)
# Set to false if topics are pre-created by infrastructure team
KAFKA_TOPIC_AUTO_CREATE=true

# Timeout for topic creation operations in seconds
# Increase if experiencing timeout errors in slow networks
KAFKA_TOPIC_CREATION_TIMEOUT=30

# Number of retry attempts for topic creation
# Set higher for unreliable networks
KAFKA_TOPIC_CREATION_RETRIES=3

# Delay between retry attempts in seconds
KAFKA_TOPIC_CREATION_RETRY_DELAY=2

# ----------------------------------------------------------------------------
# Request Topic Configuration
# ----------------------------------------------------------------------------

# Number of partitions for request topic
# Recommendation: Set equal to number of consumer instances
# Higher values = more parallelism but more overhead
KAFKA_TOPIC_REQUESTS_PARTITIONS=3

# Replication factor for request topic
# Recommendation: 1 for development, 2-3 for production
# Must not exceed number of Kafka brokers
KAFKA_TOPIC_REQUESTS_REPLICATION=1

# ----------------------------------------------------------------------------
# Response Topic Configuration
# ----------------------------------------------------------------------------

# Number of partitions for response topic
# Recommendation: Match request topic for balanced processing
KAFKA_TOPIC_RESPONSES_PARTITIONS=3

# Replication factor for response topic
# Recommendation: Match request topic
KAFKA_TOPIC_RESPONSES_REPLICATION=1

# ----------------------------------------------------------------------------
# Dead Letter Queue Configuration
# ----------------------------------------------------------------------------

# Number of partitions for DLQ topic
# Recommendation: 1 is usually sufficient (low traffic expected)
KAFKA_TOPIC_DLQ_PARTITIONS=1

# Replication factor for DLQ topic
# Recommendation: 2-3 for production (important to not lose error data)
KAFKA_TOPIC_DLQ_REPLICATION=1

# ----------------------------------------------------------------------------
# Queue Settings
# ----------------------------------------------------------------------------

# Maximum queue size
KAFKA_MAX_QUEUE_SIZE=1000

# Maximum processing time in seconds
KAFKA_MAX_PROCESSING_TIME=300

# ----------------------------------------------------------------------------
# SSL/TLS Configuration
# ----------------------------------------------------------------------------

# Enable SSL/TLS encryption (true/false)
KAFKA_USE_SSL=false

# SSL certificate files (required if KAFKA_USE_SSL=true)
# KAFKA_SSL_CAFILE=/path/to/ca-cert.pem
# KAFKA_SSL_CERTFILE=/path/to/client-cert.pem
# KAFKA_SSL_KEYFILE=/path/to/client-key.pem
# KAFKA_SSL_PASSWORD=optional-password-for-key

# ----------------------------------------------------------------------------
# Producer Configuration
# ----------------------------------------------------------------------------

# Acknowledgment level:
#   all = wait for all in-sync replicas (safest, slowest)
#   1 = wait for leader only (balanced)
#   0 = don't wait (fastest, least safe)
KAFKA_PRODUCER_ACKS=all

# Retry backoff in milliseconds
KAFKA_PRODUCER_RETRY_BACKOFF_MS=100

# Time to wait before sending batch in milliseconds
# Higher values = better batching but higher latency
KAFKA_PRODUCER_LINGER_MS=1

# Compression type: gzip, snappy, lz4, zstd, or none
# gzip = best compression, slower
# lz4 = good compression, faster
# none = no compression, fastest
KAFKA_PRODUCER_COMPRESSION_TYPE=gzip

# ----------------------------------------------------------------------------
# Consumer Configuration
# ----------------------------------------------------------------------------

# Where to start consuming when no offset exists:
#   earliest = from beginning of topic
#   latest = from end of topic (only new messages)
KAFKA_CONSUMER_AUTO_OFFSET_RESET=earliest

# Enable automatic offset commits (true/false)
# Set to false for manual commit control (recommended)
KAFKA_CONSUMER_ENABLE_AUTO_COMMIT=false

# Maximum number of records to poll at once
KAFKA_CONSUMER_MAX_POLL_RECORDS=500

# Session timeout in milliseconds
# Consumer is considered dead if no heartbeat within this time
KAFKA_CONSUMER_SESSION_TIMEOUT_MS=10000

# Heartbeat interval in milliseconds
# How often to send heartbeats to broker
KAFKA_CONSUMER_HEARTBEAT_INTERVAL_MS=3000

# ============================================================================
# Environment-Specific Examples
# ============================================================================

# --- Development Environment ---
# Minimal configuration for local development:
#
# KAFKA_BOOTSTRAP_SERVERS=localhost:9092
# KAFKA_TOPIC_AUTO_CREATE=true
# KAFKA_TOPIC_REQUESTS_PARTITIONS=1
# KAFKA_TOPIC_RESPONSES_PARTITIONS=1
# KAFKA_TOPIC_DLQ_PARTITIONS=1
# KAFKA_TOPIC_REQUESTS_REPLICATION=1
# KAFKA_TOPIC_RESPONSES_REPLICATION=1
# KAFKA_TOPIC_DLQ_REPLICATION=1

# --- Staging Environment ---
# Production-like configuration:
#
# KAFKA_BOOTSTRAP_SERVERS=kafka-1:9092,kafka-2:9092
# KAFKA_TOPIC_AUTO_CREATE=true
# KAFKA_TOPIC_REQUESTS_PARTITIONS=6
# KAFKA_TOPIC_RESPONSES_PARTITIONS=6
# KAFKA_TOPIC_DLQ_PARTITIONS=2
# KAFKA_TOPIC_REQUESTS_REPLICATION=2
# KAFKA_TOPIC_RESPONSES_REPLICATION=2
# KAFKA_TOPIC_DLQ_REPLICATION=2
# KAFKA_USE_SSL=true

# --- Production Environment ---
# High availability configuration:
#
# KAFKA_BOOTSTRAP_SERVERS=kafka-1:9092,kafka-2:9092,kafka-3:9092
# KAFKA_TOPIC_AUTO_CREATE=false  # Pre-created by ops
# KAFKA_TOPIC_REQUESTS_PARTITIONS=12
# KAFKA_TOPIC_RESPONSES_PARTITIONS=12
# KAFKA_TOPIC_DLQ_PARTITIONS=3
# KAFKA_TOPIC_REQUESTS_REPLICATION=3
# KAFKA_TOPIC_RESPONSES_REPLICATION=3
# KAFKA_TOPIC_DLQ_REPLICATION=3
# KAFKA_USE_SSL=true
# KAFKA_PRODUCER_ACKS=all
# KAFKA_CONSUMER_MAX_POLL_RECORDS=1000
# KAFKA_TOPIC_CREATION_TIMEOUT=60
# KAFKA_TOPIC_CREATION_RETRIES=5
